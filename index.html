<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inked by Chris - Tattoo Artist</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="favicon.svg">
    
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    <!-- EmailJS Setup Instructions:
    1. Replace YOUR_PUBLIC_KEY below with the public key from your EmailJS account
    2. Replace YOUR_SERVICE_ID with the Service ID from your email service
    3. Replace YOUR_TEMPLATE_ID with the Template ID from your email template
    -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
</head>
<body>
    <div class="cursor"></div>
    <header>
        <nav class="navbar">
            <div class="logo">Inked by Chris</div>
            <div class="nav-content">
                <div class="payment-methods-header">
                    <div class="payment-method" title="Cash">
                        <i class="fa-solid fa-money-bills"></i>
                        <span class="payment-label">Cash</span>
                    </div>
                    <div class="payment-method" title="Zelle">
                        <i class="fa-solid fa-circle-dollar-to-slot"></i>
                        <span class="payment-label">Zelle</span>
                    </div>
                    <div class="payment-method" title="PayPal">
                        <i class="fa-brands fa-paypal"></i>
                        <span class="payment-label">PayPal</span>
                    </div>
                </div>
                <ul class="nav-links">
                    <li><a href="#home">Home</a></li>
                    <li><a href="#gallery">Gallery</a></li>
                    <li><a href="#about">About</a></li>
                    <li><a href="#book">Book</a></li>
                    <li><a href="#contact">Contact</a></li>
                </ul>
            </div>
        </nav>
    </header>

    <main>
        <section id="home" class="hero">
            <div class="hero-overlay"></div>
            <div class="ink-bg"></div>
            <div class="container">
                <div class="hero-content">
                    <div class="pen-icon">
                        <i class="fas fa-pen-fancy"></i>
                    </div>
                    <h1 class="hero-title">INKED BY CHRIS</h1>
                    <p class="hero-subtitle">CRAFTING YOUR VISION</p>
                    <div class="hero-description">
                        <p>Custom Designs | Artistic Excellence | Timeless Ink</p>
                    </div>
                    <div class="hero-cta">
                        <a href="#book" class="cta-button">
                            <span>START YOUR JOURNEY</span>
                            <i class="fas fa-pen-nib"></i>
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <section id="about" class="about">
            <div class="container">
                <h2>The Artist</h2>
                <div class="artist-profile">
                    <div class="artist-image">
                        <img src="./images/chris-profile.jpg" alt="Chris Mod - Professional Tattoo Artist" class="profile-img">
                    </div>
                    <div class="artist-bio">
                        <h3>Chris Mod</h3>
                        <p>I'm Chris Mod, a passionate and highly skilled tattoo artist with a true love for the craft. My journey into the world of tattoos began years ago, and it's been an incredible experience ever since. I've dedicated myself to mastering the art of tattooing, ensuring that each piece I create is not just a tattoo, but a work of art that reflects my client's personality, vision, and individuality.</p>
                        <div class="specialties">
                            <h4>Specialties</h4>
                            <ul>
                                <li><i class="fas fa-star"></i> Custom Designs</li>
                                <li><i class="fas fa-star"></i> Black & Grey</li>
                                <li><i class="fas fa-star"></i> Color Realism</li>
                                <li><i class="fas fa-star"></i> Neo-Traditional</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="gallery" class="gallery">
            <div class="container">
                <h2>My Work</h2>
                <div class="gallery-grid">
                    <div class="gallery-item">
                        <img src="./images/IMG_6827.jpg" alt="Custom tattoo design showcasing detailed artistry" loading="lazy">
                        <div class="gallery-overlay">
                            <p>Custom Design</p>
                        </div>
                    </div>
                    <div class="gallery-item">
                        <img src="./images/IMG_6845.jpg" alt="Intricate tattoo artwork with fine details" loading="lazy">
                        <div class="gallery-overlay">
                            <p>Fine Detail Work</p>
                        </div>
                    </div>
                    <div class="gallery-item">
                        <img src="./images/IMG_6860 (1).jpg" alt="Unique tattoo design with personal meaning" loading="lazy">
                        <div class="gallery-overlay">
                            <p>Personal Design</p>
                        </div>
                    </div>
                    <div class="gallery-item">
                        <img src="./images/IMG_6970.jpg" alt="Beautiful custom tattoo artwork" loading="lazy">
                        <div class="gallery-overlay">
                            <p>Custom Artwork</p>
                        </div>
                    </div>
                    <div class="gallery-item">
                        <img src="./images/IMG_6974.jpg" alt="Stunning tattoo design showcasing artistic skill" loading="lazy">
                        <div class="gallery-overlay">
                            <p>Artistic Design</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="contact" class="contact">
            <div class="container">
                <h2>Get in Touch</h2>
                <div class="contact-info">
                    <div class="contact-card">
                        <i class="fas fa-phone"></i>
                        <h3>Phone</h3>
                        <p><a href="tel:+16515925122" class="phone-link">651-592-5122</a></p>
                    </div>
                    <div class="contact-card">
                        <i class="fas fa-map-marker-alt"></i>
                        <h3>Location</h3>
                        <p><a href="https://www.google.com/maps/place/2395+7th+St+N,+St+Paul,+MN+55109,+USA" target="_blank">2395 7th St N<br>Saint Paul, MN 55109<br>United States</a></p>
                    </div>
                </div>
                <div class="social-links">
                    <a href="https://instagram.com/inked_bychris" target="_blank" class="social-btn instagram">
                        <i class="fab fa-instagram"></i> @inked_bychris
                    </a>
                    <a href="https://www.snapchat.com/add/sasuke_2k" target="_blank" class="social-btn snapchat">
                        <i class="fab fa-snapchat-ghost"></i> @sasuke_2k
                    </a>
                </div>
            </div>
        </section>

        <section id="book" class="booking">
            <div class="container">
                <h2>Book a Consultation</h2>
                <form id="bookingForm" class="booking-form">
                    <div class="form-section">
                        <h3>Personal Information</h3>
                        <div class="form-group">
                            <input type="text" id="client_name" name="client_name" placeholder="Full Name" required>
                        </div>
                        <div class="form-group">
                            <input type="email" id="client_email" name="client_email" placeholder="Email Address" required>
                        </div>
                        <div class="form-group">
                            <input type="tel" id="client_phone" name="client_phone" placeholder="Phone Number (xxx-xxx-xxxx)" pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}" maxlength="12" required>
                        </div>
                        <div class="form-group">
                            <select id="client_gender" name="client_gender" required>
                                <option value="">Select Gender</option>
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                                <option value="other">Other</option>
                                <option value="prefer_not_to_say">Prefer not to say</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <input type="date" id="client_birthdate" name="client_birthdate" required>
                            <label for="client_birthdate" class="date-label">Date of Birth (Must be 18 or older)</label>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>Preferred Appointment</h3>
                        <div class="form-group">
                            <input type="text" id="datePicker" name="preferred_date" placeholder="Select Date" required readonly>
                            <div class="input-icon">
                                <i class="fas fa-calendar-alt"></i>
                            </div>
                        </div>
                        <div class="form-group">
                            <select name="preferred_time" id="timeSlot" required>
                                <option value="">Select Time</option>
                                <option value="10:00 AM">10:00 AM</option>
                                <option value="11:00 AM">11:00 AM</option>
                                <option value="12:00 PM">12:00 PM</option>
                                <option value="1:00 PM">1:00 PM</option>
                                <option value="2:00 PM">2:00 PM</option>
                                <option value="3:00 PM">3:00 PM</option>
                                <option value="4:00 PM">4:00 PM</option>
                                <option value="5:00 PM">5:00 PM</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-section">
                        <h3>Tattoo Details</h3>
                        <div class="form-group">
                            <select name="tattooType" id="tattooType" required>
                                <option value="">Select Tattoo Type</option>
                                <option value="Custom Design">Custom Design</option>
                                <option value="Black & Grey">Black & Grey</option>
                                <option value="Color Realism">Color Realism</option>
                                <option value="Neo-Traditional">Neo-Traditional</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <select name="tattooSize" id="tattooSize" required>
                                <option value="">Select Tattoo Size</option>
                                <option value="Small">Small</option>
                                <option value="Medium">Medium</option>
                                <option value="Large">Large</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <select name="tattoo_placement" id="tattoo_placement" required>
                                <option value="">Select Tattoo Placement</option>
                                <option value="Arm">Arm</option>
                                <option value="Leg">Leg</option>
                                <option value="Back">Back</option>
                                <option value="Chest">Chest</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <select name="colorPreference" id="colorPreference" required>
                                <option value="">Select Color Preference</option>
                                <option value="Black & Grey">Black & Grey</option>
                                <option value="Color">Color</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <textarea id="tattoo_description" name="tattoo_description" placeholder="Describe your tattoo idea" required></textarea>
                        </div>
                        <div class="form-group">
                            <textarea id="additional_notes" name="additional_notes" placeholder="Additional Notes"></textarea>
                        </div>
                    </div>

                    <div class="form-section policy-section">
                        <h3>Cancellation Policy</h3>
                        <div class="policy-content">
                            <p>Please read our cancellation policy carefully:</p>
                            <ul>
                                <li>We understand that plans can change. If you need to cancel or reschedule your appointment, please do so at least 24 hours in advance.</li>
                                <li>You can easily cancel your appointment through:</li>
                                <ul>
                                    <li>The cancellation link in your confirmation email</li>
                                    <li>Email: senghakmad@gmail.com</li>
                                </ul>
                                <li>Early notification allows us to accommodate other clients who may be waiting for an appointment.</li>
                                <li>We appreciate your consideration and understanding.</li>
                            </ul>
                        </div>
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="policy_agreement" name="policy_agreement" required>
                                I understand and agree to the cancellation policy
                            </label>
                        </div>
                    </div>

                    <button type="submit" class="submit-btn">Request Consultation</button>
                </form>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2025 Inked by Chris. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // Initialize EmailJS
        (function() {
            emailjs.init("nqLDVniO3BUlQ-e1n");
        })();

        // Generate a unique booking ID
        function generateBookingId() {
            return 'BK' + Date.now().toString(36) + Math.random().toString(36).substr(2, 5);
        }

        // Age verification function
        function isOver18(birthDate) {
            const today = new Date();
            const birth = new Date(birthDate);
            let age = today.getFullYear() - birth.getFullYear();
            const monthDiff = today.getMonth() - birth.getMonth();
            
            if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birth.getDate())) {
                age--;
            }
            
            return age >= 18;
        }

        // Format date for display
        const formatDate = (dateStr) => {
            return new Date(dateStr).toLocaleDateString('en-US', {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
        };

        // Format gender for display
        const formatGender = (gender) => {
            const genderMap = {
                'male': 'Male',
                'female': 'Female',
                'other': 'Other',
                'prefer_not_to_say': 'Prefer not to say'
            };
            return genderMap[gender] || gender;
        };

        // Handle booking form submission
        document.getElementById('bookingForm').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            // Age verification
            const birthDate = document.getElementById('client_birthdate').value;
            if (!isOver18(birthDate)) {
                alert('Sorry, you must be 18 or older to book an appointment.');
                return;
            }

            // Verify appointment time is not within 24 hours
            const appointmentDate = new Date(document.getElementById('datePicker').value + ' ' + document.getElementById('timeSlot').value);
            const now = new Date();
            const hoursDiff = (appointmentDate - now) / (1000 * 60 * 60);
            
            if (hoursDiff < 24) {
                alert('Appointments must be booked at least 24 hours in advance. Please select a later date/time.');
                return;
            }

            // Generate booking ID
            const bookingId = generateBookingId();

            // Create cancellation link with full URL
            const cancelUrl = `${window.location.origin}/cancel.html?id=${bookingId}`;

            // Calculate client's age
            const clientAge = isOver18(birthDate) ? Math.floor((new Date() - new Date(birthDate)) / (365.25 * 24 * 60 * 60 * 1000)) : 'Under 18';

            // Prepare the template parameters
            const templateParams = {
                // Client Information
                booking_id: bookingId,
                client_name: document.getElementById('client_name').value,
                client_email: document.getElementById('client_email').value,
                client_phone: document.getElementById('client_phone').value,
                client_gender: formatGender(document.getElementById('client_gender').value),
                client_birthdate: formatDate(birthDate),
                client_age: clientAge,
                
                // Appointment Details
                preferred_date: formatDate(document.getElementById('datePicker').value),
                preferred_time: document.getElementById('timeSlot').value,
                tattoo_type: document.getElementById('tattooType').value,
                tattoo_size: document.getElementById('tattooSize').value,
                tattoo_placement: document.getElementById('tattoo_placement').value,
                color_preference: document.getElementById('colorPreference').value,
                tattoo_description: document.getElementById('tattoo_description').value,
                additional_notes: document.getElementById('additional_notes').value || 'None provided',
                
                // Shop Information
                to_name: "Chris",
                shop_name: "Inked by Chris",
                shop_phone: "651-592-5122",
                shop_address: "2395 7th St N, Saint Paul, MN 55109",
                shop_email: "senghakmad@gmail.com",
                
                // Cancellation Information
                cancellation_policy: `
                    • Cancellations must be made at least 24 hours before your appointment
                    • Click the cancellation link below to cancel your appointment
                    • For any questions, please email us at senghakmad@gmail.com
                `,
                cancel_url: cancelUrl,
                cancel_button_text: "Cancel Appointment",
                cancel_instructions: "To cancel your appointment, click the button below:"
            };

            try {
                // Send notification to shop owner with all details
                await emailjs.send('service_3pilkcs', 'template_tukgt7p', templateParams);

                // Send confirmation to client with necessary details
                await emailjs.send('service_3pilkcs', 'template_gowinjb', {
                    booking_id: templateParams.booking_id,
                    to_name: templateParams.client_name,
                    booking_date: templateParams.preferred_date,
                    booking_time: templateParams.preferred_time,
                    shop_name: templateParams.shop_name,
                    shop_email: templateParams.shop_email,
                    shop_address: templateParams.shop_address,
                    cancel_url: templateParams.cancel_url,
                    cancel_button_text: templateParams.cancel_button_text,
                    cancel_instructions: templateParams.cancel_instructions,
                    cancellation_policy: templateParams.cancellation_policy
                });

                // Show success message
                alert('Thank you for your booking request! We will review your details and contact you within 24-48 hours to confirm your consultation. Please check your email for a confirmation of your request.');
                
                // Reset form
                this.reset();

            } catch (error) {
                console.error('FAILED...', error);
                alert('Sorry, there was an error sending your booking request. Please try again or contact us directly at 651-592-5122.');
            } finally {
                // Reset button state
                const submitBtn = this.querySelector('button[type="submit"]');
                const originalBtnText = submitBtn.textContent;
                submitBtn.textContent = originalBtnText;
                submitBtn.disabled = false;
            }
        });
    </script>

    <script>
        // Initialize Flatpickr
        const datePicker = flatpickr("#datePicker", {
            minDate: "today",
            dateFormat: "Y-m-d",
            disable: [
                function(date) {
                    // Disable Sundays and Mondays
                    return (date.getDay() === 0 || date.getDay() === 1);
                }
            ],
            locale: {
                firstDayOfWeek: 1 // Start week on Monday
            },
            disableMobile: false, // Enable custom calendar on mobile
            static: true,
            theme: "dark"
        });
    </script>

    <script>
        // Add phone number formatting
        document.getElementById('client_phone').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, ''); // Remove all non-digits
            if (value.length >= 3 && value.length < 6) {
                value = value.slice(0,3) + '-' + value.slice(3);
            } else if (value.length >= 6) {
                value = value.slice(0,3) + '-' + value.slice(3,6) + '-' + value.slice(6,10);
            }
            e.target.value = value;
        });
    </script>

    <script src="script.js"></script>
    <script src="booking.js"></script>
</body>
</html>
